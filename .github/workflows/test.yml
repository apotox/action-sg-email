name: Test action

on:
  push:
    branches:
      - master
    paths-ignore:
      - README.md
  workflow_dispatch:

jobs:
  main:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 1
      matrix:
        include:
          - subject: Plain body (attachment)
            text: |
              first line
              second line
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Send mail
        uses: ./
        with:
          sgApiKey: ${{secrets.SG_API_KEY}}
          subject: ${{matrix.subject}}
          text: ${{matrix.text}}
          to: ${{github.event.pusher.email}}
          from: github-actions

